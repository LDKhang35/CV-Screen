<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Kết quả sàng lọc CV</title>
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='image/logo.ico') }}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

<div class="container py-5">
    <h2 class="mb-4">Kết quả sàng lọc CV</h2>

    <table class="table table-bordered table-hover bg-white">
        <thead class="table-light">
            <tr>
                <th>#</th>
                <th>File CV</th>
                <th>Họ tên</th>
                <th>Điểm phù hợp (%)</th>
                <th>Phân loại</th>
                <th>Nhận xét</th>
                <th>Chi tiết</th>
            </tr>
        </thead>  
        <tbody>
            {% for result in results %}
            <tr>
                <td>{{ loop.index }}</td>
                <td>{{ result.file_name}}</td>
                <td>{{ result.name }}</td>
                <td>{{ result.similarity }}</td>
                <td>{{ result.classification }}</td>
                <td>{{ result.assessment }}</td>
                <td>
                    <button class="btn btn-sm btn-info" data-bs-toggle="modal" data-bs-target="#cvModal{{ loop.index }}">Xem chi tiết</button>
                </td>
            </tr>

            <!-- Modal chi tiết -->
            <div class="modal fade" id="cvModal{{ loop.index }}" tabindex="-1" aria-labelledby="cvModalLabel{{ loop.index }}" aria-hidden="true">
              <div class="modal-dialog modal-lg modal-dialog-scrollable">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title" id="cvModalLabel{{ loop.index }}">Chi tiết ứng viên: {{ result.name }}</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Đóng"></button>
                  </div>
                  <div class="modal-body">
                    <p><strong>Vị trí ứng tuyển:</strong> {{ result.details.applied_position or 'Không rõ' }}</p>
                    <p><strong>Giới tính:</strong> {{ result.details.gender or 'Không rõ' }}</p>
                    <p><strong>Ngày sinh:</strong> {{ result.details.dob or 'Không rõ' }}</p>
                    <p><strong>Email:</strong> {{ result.details.email or 'Không rõ' }}</p>
                    <p><strong>Địa chỉ:</strong> {{ result.details.address or 'Không rõ' }}</p>
                    <p><strong>Số điện thoại:</strong> {{ result.details.phone or 'Không rõ' }}</p>
                    <p><strong>Trường:</strong> {{ result.details.university or 'Không rõ' }}</p>
                    <p><strong>Chuyên ngành:</strong> {{ result.details.major or 'Không rõ' }}</p>
                    <p><strong>GPA:</strong> {{ result.details.gpa or 'Không rõ' }}</p>
                    <p><strong>Kỹ năng:</strong><br> {{ result.details.skills or 'Không có thông tin' }}</p>
                    <p><strong>Kinh nghiệm:</strong><br> {{ result.details.experience or 'Không có thông tin' }}</p>
                    <p><strong>Chứng chỉ:</strong><br> {{ result.details.certifications or 'Không có thông tin' }}</p>
                  </div>
                </div>
              </div>
            </div>
            {% endfor %}
        </tbody>
    </table>
    <div class="text-center mt-4">
      <a href="{{ url_for('main.home') }}" class="btn btn-secondary">Quay lại trang sàng lọc CV</a>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
